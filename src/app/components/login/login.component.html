<div class="cs-height_100 cs-height_lg_70"></div>
<div class="container">
  <div class="row align-items-center">
    <!-- Columna de formulario -->
    <div class="col-lg-6 col-md-12 mb-4 mb-lg-0">
      <form
        class="cs-form_card cs-style1 cs-box_shadow cs-white_bg"
        [formGroup]="ngFormLogin"
        (ngSubmit)="onLogin()"
        novalidate>

        <div class="cs-form_card_in">
          <h2 class="cs-form_title text-center">Iniciar sesión</h2>
          <p style="text-align: center;">Bienvenidos de nuevo a Camiwa</p>
          <!-- Mensaje de error servidor -->
          <div *ngIf="isError" class="alert alert-danger mt-3 mb-0">
            {{ serverMsg }}
          </div>

          <div class="cs-height_30 cs-height_lg_30"></div>

          <!-- Email -->
          <div class="cs-form_field_wrap">
            <input
              type="email"
              class="cs-form_field"
              placeholder="Ingresa tu correo"
              formControlName="email"
              [class.is-invalid]="submitted && f['email'].invalid" />
            <div class="invalid-feedback d-block" *ngIf="submitted && f['email'].errors">
              <div *ngIf="f['email'].errors['required']">El email es requerido.</div>
              <div *ngIf="f['email'].errors['email']">Formato de email inválido.</div>
            </div>
          </div>

          <div class="cs-height_20 cs-height_lg_20"></div>

          <!-- Password -->
          <div class="cs-form_field_wrap cs-relative">
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              class="cs-form_field cs-pr-44"
              placeholder="Contraseña"
              autocomplete="new-password" />

            <button
              type="button"
              class="cs-eye_btn"
              (click)="showPassword = !showPassword"
              [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'">

              <!-- OJO: invertimos las condiciones -->
              <!-- Estado oculto (showPassword = false) -> mostrar OJO TACHADO -->
              <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none">
                <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12Z" stroke="currentColor" stroke-width="2"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                <line x1="3" y1="3" x2="21" y2="21" stroke="currentColor" stroke-width="2"/>
              </svg>

              <!-- Estado visible (showPassword = true) -> mostrar OJO ABIERTO -->
              <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none">
                <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12Z" stroke="currentColor" stroke-width="2" />
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>

            <small class="text-danger" *ngIf="f['password'].touched && f['password'].invalid">
              Mínimo 6 caracteres.
            </small>
          </div>

          <div class="cs-height_20 cs-height_lg_20"></div>

          <!-- Remember -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="remember" formControlName="remember">
            <label class="form-check-label" for="remember">Recuérdame</label>
          </div>

          <div class="cs-height_15 cs-height_lg_15"></div>

          <!-- Botón -->
          <button
            class="cs-btn cs-style1 btn btn-accent w-100"
            type="submit"
            [disabled]="loading">
            <span *ngIf="!loading">Ingresar</span>
            <span *ngIf="loading"><i class="fa fa-spinner fa-spin me-2"></i>Validando…</span>
          </button>

          <!-- Divider social -->
          <div class="align-items-center d-flex my-4">
            <hr class="flex-grow-1 m-0">
            <span class="px-3 text-muted">o</span>
            <hr class="flex-grow-1 m-0">
          </div>

          <!-- Google -->
         <!--  <a class="btn btn-light w-100 d-flex align-items-center justify-content-center"
             href="https://www.camiwa.com/auth/google">
            <i class="bi bi-google me-2"></i> Entrar con Google
          </a> -->

          <div class="cs-height_30 cs-height_lg_30"></div>

          <!-- Footer -->
          <div class="cs-form_footer text-center">
            ¿No tienes cuenta?
            <a (click)="global.setRouterActive('register')"style="cursor:pointer">Regístrate ahora</a>
            &nbsp; | &nbsp;
            <a (click)="global.setRouterActive('recover-password')" style="cursor:pointer">Olvidé mi contraseña</a>
          </div>
        </div>
      </form>
    </div>

    <!-- Columna de imagen -->
    <div class="col-lg-6 col-md-12 text-center">
      <img src="assets/img/about.png" alt="Inicia sesión" class="img-fluid rounded shadow-sm">
    </div>
  </div>
</div>
<div class="cs-height_100 cs-height_lg_70"></div>
